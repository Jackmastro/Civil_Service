# GENERAL IMPORT
import RPi.GPIO as GPIO
import datetime
import time

from LCD_Class import *
from Chip_Class import *
from Sensor_Class import *
from Actuator_Class import *
from Controller_Class import *
from Saver_Class import *

GPIO.setmode(GPIO.BCM)

Thermero = Thermero_DS18B20("Thermero")
RTClock = RTC_DS1307("RTClock")
time_start_process_str = RTClock.read_data_point()
print(time_start_process_str)
saver = Saver(time_start_process_str)

# Tbefore= time.time()
# Thermero.read_data()
# Tafter = time.time()
# print("time taken {}".format(Tafter-Tbefore))
# Thermero.read_data_point()

IRcamera = IR_MLX90640("IRcamera")
IRcamera.save_data()
dataIR = IRcamera.data_table
# print(dataIR)
# [array([24.5 , 24.59, 24.08, 24.46, 23.83, 24.17, 23.99, 24.29, 24.11,
#        24.09, 23.76, 24.39, 24.32, 24.16, 23.76, 23.92, 24.55, 24.4 ,
#        24.43, 24.41, 24.64, 24.74, 24.86, 24.98, 24.7 , 25.07, 24.94,
#        25.6 , 25.76, 25.75, 26.54, 26.77, 24.7 , 24.5 , 24.48, 24.38,
#        23.99, 23.84, 24.36, 24.41, 24.42, 23.97, 23.89, 24.11, 24.1 ,
#        24.22, 23.88, 24.36, 24.65, 24.47, 24.15, 24.5 , 24.58, 24.83,
#        25.17, 25.1 , 25.06, 25.18, 25.09, 25.3 , 25.91, 26.05, 26.16,
#        26.82, 24.5 , 24.54, 24.33, 24.41, 24.01, 23.7 , 23.75, 24.06,
#        24.2 , 24.24, 23.65, 23.73, 23.91, 24.06, 24.34, 24.62, 24.51,
#        24.62, 24.08, 24.06, 24.49, 25.2 , 24.83, 24.65, 24.05, 23.93,
#        24.64, 25.28, 25.63, 26.12, 26.06, 26.04, 24.42, 24.41, 24.27,
#        24.29, 24.18, 24.03, 23.68, 24.12, 23.97, 23.78, 23.75, 23.82,
#        23.85, 23.8 , 24.27, 24.69, 24.61, 24.16, 23.99, 24.53, 24.8 ,
#        25.07, 25.14, 24.73, 24.41, 24.2 , 24.34, 24.99, 25.76, 25.56,
#        25.94, 26.59, 24.22, 23.97, 23.71, 23.8 , 23.8 , 23.5 , 23.01,
#        23.55, 23.62, 23.31, 23.49, 23.43, 23.64, 23.52, 23.83, 24.3 ,
#        23.86, 23.82, 24.36, 24.29, 24.41, 24.58, 24.55, 24.65, 23.85,
#        24.09, 24.39, 24.74, 25.28, 25.59, 26.05, 26.14, 24.17, 23.88,
#        23.44, 23.7 , 23.34, 23.4 , 23.11, 23.46, 23.38, 23.19, 23.05,
#        23.51, 23.96, 23.25, 23.92, 24.54, 23.99, 24.08, 24.28, 24.38,
#        24.31, 24.61, 24.49, 25.24, 24.16, 24.54, 24.32, 24.87, 25.4 ,
#        25.43, 26.16, 26.02, 23.96, 23.93, 23.95, 23.52, 23.42, 23.39,
#        23.36, 23.41, 23.24, 23.06, 23.07, 23.36, 23.47, 23.34, 23.41,
#        24.19, 23.93, 23.75, 24.08, 24.36, 24.22, 24.4 , 24.57, 24.29,
#        24.4 , 24.27, 24.36, 24.43, 24.84, 25.23, 25.49, 26.01, 24.12,
#        24.  , 23.49, 23.44, 24.09, 23.44, 23.49, 23.48, 23.33, 22.95,
#        23.54, 23.63, 23.58, 23.38, 23.53, 24.11, 24.03, 24.15, 24.2 ,
#        24.24, 24.16, 24.11, 23.8 , 24.56, 24.31, 24.15, 24.44, 24.88,
#        24.96, 25.31, 25.63, 26.06, 24.14, 24.05, 23.35, 23.56, 23.45,
#        23.59, 23.17, 23.17, 23.03, 23.21, 23.47, 23.63, 23.41, 23.47,
#        23.46, 23.7 , 24.15, 23.95, 24.23, 24.06, 23.51, 23.85, 23.61,
#        23.6 , 23.65, 24.1 , 24.08, 24.37, 24.83, 24.73, 25.47, 25.88,
#        23.64, 23.71, 23.47, 23.44, 23.37, 23.27, 23.26, 23.6 , 23.48,
#        23.26, 23.09, 23.55, 23.17, 23.55, 23.38, 23.95, 24.23, 24.16,
#        23.84, 24.14, 23.95, 23.72, 23.7 , 24.  , 23.94, 24.17, 24.33,
#        24.83, 24.34, 24.38, 25.36, 25.73, 24.03, 23.75, 23.46, 23.62,
#        23.66, 23.54, 23.4 , 23.46, 23.69, 23.1 , 23.41, 23.33, 23.58,
#        23.63, 23.5 , 23.54, 23.78, 24.42, 23.82, 23.56, 23.62, 23.78,
#        23.56, 23.91, 24.17, 24.41, 24.21, 24.09, 24.37, 24.25, 25.08,
#        25.2 , 24.35, 23.63, 23.37, 23.68, 23.39, 23.61, 23.49, 23.55,
#        23.44, 23.48, 23.32, 23.76, 23.53, 23.65, 23.58, 23.57, 24.03,
#        23.78, 23.73, 24.09, 23.87, 24.18, 24.13, 24.28, 24.27, 24.12,
#        24.47, 24.32, 24.28, 24.46, 24.72, 25.3 , 24.65, 24.19, 23.31,
#        23.89, 23.62, 23.58, 23.02, 23.57, 23.79, 23.65, 23.44, 23.76,
#        23.93, 23.32, 23.32, 23.77, 23.68, 24.09, 23.98, 24.06, 24.4 ,
#        24.3 , 23.85, 24.09, 23.89, 23.91, 24.46, 24.4 , 24.06, 24.45,
#        23.96, 24.51, 24.95, 24.45, 23.6 , 23.95, 23.7 , 23.84, 23.45,
#        24.  , 23.68, 23.54, 23.68, 24.01, 23.84, 24.03, 23.54, 23.81,
#        23.93, 23.65, 23.9 , 24.43, 24.17, 24.19, 23.92, 24.13, 23.79,
#        23.78, 24.17, 24.44, 24.16, 24.28, 24.21, 25.02, 25.25, 25.16,
#        23.74, 23.91, 23.4 , 23.48, 23.7 , 23.63, 23.61, 23.59, 23.41,
#        23.26, 23.57, 23.69, 24.18, 23.6 , 23.7 , 23.81, 23.96, 24.16,
#        24.08, 23.9 , 24.24, 24.35, 23.72, 23.84, 24.  , 24.34, 24.2 ,
#        24.49, 24.64, 24.27, 25.34, 25.04, 24.66, 24.39, 23.52, 23.35,
#        23.42, 23.86, 23.55, 23.15, 23.63, 23.66, 23.81, 23.91, 23.75,
#        24.12, 23.8 , 23.9 , 23.68, 24.04, 23.83, 23.95, 24.34, 24.41,
#        23.95, 24.04, 23.87, 24.74, 24.66, 24.51, 24.47, 24.8 , 25.74,
#        25.21, 24.4 , 24.47, 23.24, 23.19, 23.62, 23.59, 23.36, 23.08,
#        23.54, 23.81, 23.74, 23.86, 23.58, 24.34, 23.73, 23.79, 23.69,
#        23.72, 23.74, 23.99, 24.11, 24.19, 23.91, 24.13, 23.84, 24.26,
#        24.68, 24.09, 24.67, 23.98, 25.68, 25.51, 24.71, 24.14, 23.73,
#        23.62, 23.52, 23.49, 23.48, 23.13, 23.79, 23.86, 23.68, 23.59,
#        23.82, 23.88, 23.77, 23.49, 23.78, 24.14, 24.35, 24.21, 23.65,
#        24.07, 23.78, 23.76, 24.3 , 24.51, 24.56, 24.5 , 24.72, 24.71,
#        25.94, 25.63, 24.57, 25.08, 24.1 , 23.95, 23.16, 23.36, 23.61,
#        23.28, 23.64, 23.83, 23.65, 23.5 , 23.43, 23.71, 23.54, 23.28,
#        23.81, 24.05, 24.06, 24.06, 23.48, 23.71, 24.3 , 24.16, 23.79,
#        24.13, 24.43, 24.98, 24.7 , 24.96, 25.64, 25.3 , 25.49, 25.16,
#        23.97, 24.19, 23.42, 23.56, 23.71, 23.14, 23.53, 23.72, 23.77,
#        23.75, 23.82, 23.74, 23.29, 23.38, 23.9 , 24.12, 23.98, 23.9 ,
#        23.88, 24.3 , 23.81, 24.17, 23.83, 24.36, 24.48, 24.58, 24.52,
#        24.73, 26.18, 25.37, 25.39, 25.54, 24.64, 24.29, 23.82, 23.41,
#        23.76, 23.27, 23.44, 23.35, 23.92, 23.73, 23.8 , 24.13, 23.66,
#        23.84, 23.89, 23.66, 23.78, 23.88, 24.11, 24.31, 24.36, 24.38,
#        24.36, 24.72, 24.83, 24.75, 25.11, 24.87, 26.09, 26.11, 25.66,
#        25.58, 24.5 , 24.75, 23.48, 23.67, 23.82, 23.44, 23.69, 23.94,
#        24.01, 23.97, 24.05, 24.35, 24.24, 23.54, 23.56, 23.52, 23.46,
#        23.72, 24.14, 24.32, 24.26, 24.41, 24.62, 24.73, 24.91, 24.79,
#        24.96, 25.64, 26.03, 25.84, 25.38, 25.69, 25.31, 24.74, 23.95,
#        24.13, 23.87, 23.54, 23.65, 23.88, 23.66, 23.53, 23.77, 24.  ,
#        23.78, 23.89, 23.41, 23.76, 24.12, 23.73, 24.26, 24.35, 23.96,
#        24.58, 24.65, 25.05, 24.57, 25.11, 25.33, 26.05, 25.79, 25.95,
#        26.03, 25.8 , 25.3 , 25.08, 24.09, 24.02, 23.62, 23.66, 23.79,
#        23.78, 23.79, 24.4 , 23.5 , 23.91, 23.55, 23.62, 23.32, 23.86,
#        24.09, 24.01, 24.61, 24.62, 24.53, 24.26, 25.17, 25.14, 25.18,
#        25.2 , 26.02, 25.92])]

RTClock.save_data()
Thermero.save_data()
# Thermero.save_data_point()
data = Thermero.data_table
# [array([[25.25, 24.69, 24.88, 24.38, 24.94, 25.81, 25.  , 25.31, 24.19,
#         25.44, 25.62, 25.19, 24.25, 24.5 , 24.88, 24.  , 25.75, 23.88,
#         24.81, 24.62]])]
# print(data)
saver.save_Thermero_data(RTClock, Thermero)
# Traceback (most recent call last):
#   File "/home/pi/Civil_Service/debugThermero.py", line 40, in <module>
#     saver.save_Thermero_data(RTClock, Thermero)
#   File "/home/pi/Civil_Service/Saver_Class.py", line 78, in save_Thermero_data
#     thermero_data_frame = pd.DataFrame(Thermero.data_table, columns=thermero_header)
#   File "/home/pi/.local/lib/python3.9/site-packages/pandas/core/frame.py", line 798, in __init__
#     mgr = ndarray_to_mgr(
#   File "/home/pi/.local/lib/python3.9/site-packages/pandas/core/internals/construction.py", line 320, in ndarray_to_mgr
#     values = _prep_ndarraylike(values, copy=copy_on_sanitize)
#   File "/home/pi/.local/lib/python3.9/site-packages/pandas/core/internals/construction.py", line 560, in _prep_ndarraylike
#     return _ensure_2d(values)
#   File "/home/pi/.local/lib/python3.9/site-packages/pandas/core/internals/construction.py", line 570, in _ensure_2d
#     raise ValueError(f"Must pass 2-d input. shape={values.shape}")
# ValueError: Must pass 2-d input. shape=(1, 1, 20)